gain_potential_decision = {
	picture = "gfx/interface/illustrations/decisions/decision_invite_knights.dds"
	
	major = yes

	ai_check_interval = 0
	
	is_shown = {
		has_game_rule = PC_magic_level_decision
		NOT = {
			has_character_flag = ancient_magic_potential_chosen
			has_trait = magic_potential	
		}
	}
	
	desc = gain_potential_decision_desc
	
	effect = {
		trigger_event = ancient_magic_gain_talent_events.001
	}	

	ai_potential = {
		always = no
	}

	ai_will_do = {
		base = 0
	}
}

forge_material_soul_decision = {
	picture = "gfx/interface/illustrations/decisions/decision_personal_religious.dds"
	major = yes

	is_shown = {
		is_magus_trigger = yes
		NOT = { has_character_flag = materilised_soul }
	}

	is_valid = {
		has_perk = deacon_of_death_perk
		has_perk = master_of_puppets_perk
		var:mana >= soul_materialisation_mana_cost
	}

	effect = {
		magic_dementia_immunity_effect = yes
		hidden_effect = { trigger_event = ancient_magic_rituals_events.001 }
	}

	ai_check_interval = 12

	ai_will_do = {
		base = 40
		modifier = {
			mage_level >= 10
			add = 10
		}
		modifier = {
			mage_level >= 15
			add = 10
		}
		modifier = {
			mage_level >= 20
			add = 10
		}
		modifier = {
			mage_level >= 25
			add = 10
		}
		modifier = {
			var:memory_life_capacity_left <= 10
			multiply = 1.5
		}
	}
}

implant_magical_blood_decision = { #Decision to implant into oneself blood of others
	picture = "gfx/interface/illustrations/decisions/decision_personal_religious.dds"
	
	major = yes
	
	ai_check_interval = 12
	
	is_shown = {
		has_some_blood_in_artifact_inventory_trigger = yes
	}
	
	desc = implant_magical_blood_decision_desc

	widget = {
		gui = decision_view_widget_AM_implant_magical_blood
		controller = decision_option_list_controller
		
		# Close family
		item = {
			value = AM_implant_magical_blood_option_close_family
			is_shown = {
				any_mana_blood_in_inventory = {
					creator = {
						is_close_family_of = ROOT
					}
				}
			}
			current_description = AM_implant_magical_blood_option_close_family_tooltip
			localization = AM_implant_magical_blood_option_close_family
			icon = "gfx/interface/icons/event_types/type_family.dds"

			ai_chance = {
				value = 100
			}
		}
		
		# Extended family
		item = {
			value = AM_implant_magical_blood_option_extended_family
			is_shown = {
				any_mana_blood_in_inventory = {
					creator = {
						is_extended_family_of = ROOT
					}
				}
			}
			current_description = AM_implant_magical_blood_option_extended_family_tooltip
			localization = AM_implant_magical_blood_option_extended_family
			icon = "gfx/interface/icons/event_types/type_family.dds"

			ai_chance = {
				value = 50
			}
		}
		
		# others
		item = {
			value = AM_implant_magical_blood_option_others
			is_shown = {
				any_mana_blood_in_inventory = {
					creator = {
						NOT = {
							is_extended_family_of = ROOT
							is_close_family_of = ROOT
						}
					}
				}
			}
			current_description = AM_implant_magical_blood_option_others_tooltip
			localization = AM_implant_magical_blood_option_others
			icon = "gfx/interface/icons/artifact/mana_blood.dds"

			ai_chance = {
				value = 20
			}
		}
	}
	
	is_valid_showing_failures_only = {
		is_available_adult = yes
	}
	
	effect = {
		if = {
			limit = { scope:AM_implant_magical_blood_option_close_family = yes }
			trigger_event = ancient_magic_rituals_events.005
		}
		else_if = {
			limit = { scope:AM_implant_magical_blood_option_extended_family = yes }
			trigger_event = ancient_magic_rituals_events.006
		}
		else_if = {
			limit = { scope:AM_implant_magical_blood_option_others = yes }
			trigger_event = ancient_magic_rituals_events.007
		}
	}
	
	ai_will_do = {
		base = 50
		modifier = {
			has_trait = ambitious
			add = 100
		}
	}
}